<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://unpkg.com/htmx.org@1.9.6"
      integrity="sha384-FhXw7b6AlE/jyjlZH5iHa/tTe9EpJ1Y55RjcgPbjeWMskSxZt1v9qkxLJWNJaGni"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="/css/input.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Inter"
      rel="stylesheet"
    />
    <title>Mortgage Calculator</title>
    <style>
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      /* Firefox */
      input[type="number"] {
        -moz-appearance: textfield;
      }
    </style>
  </head>
  <body>
    <section class="m-auto w-3/4 h-fit p-8 bg-black">
      <h1 class="text-center text-white text-5xl py-4">Mortgage Calculator</h1>
      <div class="m-auto text-center my-4">
        <ol class="text-white flex justify-center space-x-8">
          <li>
            <button
              class="border-b-2 border-transparent hover:border-blue-500 focus:border-blue-500"
            >
              Conventional
            </button>
          </li>
          <li>
            <button
              class="border-b-2 border-transparent hover:border-blue-500 focus:border-blue-500"
            >
              FHA
            </button>
          </li>
          <li>
            <button
              class="border-b-2 border-transparent hover:border-blue-500 focus:border-blue-500"
            >
              Jumbo
            </button>
          </li>
          <li>
            <button
              class="border-b-2 border-transparent hover:border-blue-500 focus:border-blue-500"
            >
              Refinance
            </button>
          </li>
          <li>
            <button
              class="border-b-2 border-transparent hover:border-blue-500 focus:border-blue-500"
            >
              VA Loan
            </button>
          </li>
        </ol>
        <p class="m-auto w-1/2 text-white my-4">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Saepe in a
          dolore cupiditate ut accusantium consectetur rem necessitatibus magnam
          corporis, ex expedita architecto asperiores eligendi eveniet totam
          illo, voluptatum hic?
        </p>
      </div>

      <form class="m-auto grid grid-cols-3 gap-8">
        <div class="col-span-2 px-12 border-r-2 my-4">
          <div class="grid grid-cols-2 gap-8 my-6">
            <div class="flex flex-col">
              <label class="text-white mb-1" for="purchasePrice"
                >Purchase Price</label
              >
              <div class="relative inline-block">
                <span
                  class="absolute left-2 top-1/4 translate-y-2/4 text-white text-xl -my-1.5"
                  >$</span
                >
                <input
                  hx-post="/postMonthlyPayment"
                  hx-trigger="keyup changed delay:0.25s"
                  hx-target="#monthlyPayment"
                  class="w-full block border-white py-2.5 text-sm text-white bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-white peer pl-6"
                  name="purchasePrice"
                  id="purchasePrice"
                  type="number"
                  value="0"
                  onkeypress="return /[0-9]/i.test(event.key)"
                />
              </div>
            </div>
            <div class="flex flex-col">
              <label class="text-white mb-1" for="mortgageTerm"
                >Mortgage Term</label
              >
              <select
                hx-post="/postMonthlyPayment"
                hx-target="#monthlyPayment"
                class="w-full block py-2.5 px-0 text-sm text-white bg-transparent border-0 border-b-2 border-white appearance-none focus:outline-none focus:ring-0 focus:border-white peer"
                name="mortgageTerm"
                id="mortgageTerm"
              >
                <option class="bg-black text-white border-white" value="360">
                  30 years
                </option>
                <option class="bg-black text-white border-white" value="180">
                  15 years
                </option>
              </select>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-8 my-6">
            <!-- Down Payment -->
            <div class="flex flex-col">
              <label class="text-white mb-1" for="downPayment"
                >Down Payment</label
              >
              <input
                hx-post="/postMonthlyPayment"
                hx-target="#monthlyPayment"
                class="w-full block bg-transparent text-white border-b-2 border-white"
                type="range"
                name="downPayment"
                id="downPayment"
                min="0"
                value="0"
              />
            </div>
            <!-- Annual Taxes -->
            <div class="flex flex-col">
              <label class="text-white mb-1" for="annualTaxes"
                >Annual Taxes</label
              >
              <input
                hx-post="/postMonthlyPayment"
                hx-target="#monthlyPayment"
                class="w-full block bg-transparent text-white border-b-2 border-white"
                type="range"
                name="annualTaxes"
                id="annualTaxes"
                min="0.0"
                max="1.0"
                step="0.01"
              />
            </div>
          </div>
          <!-- Interest Rate -->
          <div class="my-6">
            <label class="text-white mb-1" for="interestRate"
              >Interest Rate (%)</label
            >
            <input
              hx-post="/postMonthlyPayment"
              hx-target="#monthlyPayment"
              class="w-full block"
              type="range"
              name="interestRate"
              id="interestRate"
              min="0.0"
              max="12.0"
              step="0.125"
            />
          </div>

          <div class="grid grid-cols-2 gap-8 my-6">
            <div class="flex flex-col">
              <label class="text-white mb-1" for="annualInsurance"
                >Annual Insurance</label
              >
              <div class="relative inline-block">
                <span
                  class="absolute left-2 top-1/4 translate-y-2/4 text-white text-xl -my-1.5"
                  >$</span
                >
                <input
                  hx-post="/postMonthlyPayment"
                  hx-target="#monthlyPayment"
                  class="w-full block border-white py-2.5 text-sm text-white bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-white peer pl-6"
                  name="annualInsurance"
                  id="annualInsurance"
                  type="number"
                  min="0"
                  onkeypress="return /[0-9]/i.test(event.key)"
                />
              </div>
            </div>
            <div class="flex flex-col">
              <label class="text-white mb-1" for="monthlyHoa"
                >Monthly HOA</label
              >
              <div class="relative inline-block">
                <span
                  class="absolute left-2 top-1/4 translate-y-2/4 text-white text-xl -my-1.5"
                  >$</span
                >
                <input
                  hx-post="/postMonthlyPayment"
                  hx-target="#monthlyPayment"
                  class="w-full block border-white py-2.5 text-sm text-white bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-white peer pl-6"
                  name="monthlyHoa"
                  id="monthlyHoa"
                  type="number"
                  onkeypress="return /[0-9]/i.test(event.key)"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="col-span-1">
          <h3
            class="text-white text-6xl text-center m-auto"
            id="monthlyPayment"
          >
            $0.00
          </h3>
        </div>
      </form>
    </section>
  </body>
  <script>
    const principalInput = document.getElementById("purchasePrice");
    const downPaymentInput = document.getElementById("downPayment");
    let principal = parseInt(principalInput.value);

    principalInput.addEventListener("input", function () {
      downPaymentInput.max = principal;
      if (downPaymentInput.value > principal) {
        downPaymentInput.value = principal;
      }
    });
  </script>
</html>
